[{"path":"/dev/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2021-2022 Kompetenzzentrum Wasser Berlin gGmbH (KWB) Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"/dev/articles/prediction_random-forest.html","id":"install-r-package","dir":"Articles","previous_headings":"","what":"Install R Package","title":"Random Forest","text":"","code":"# Enable KWB-R universe  options(repos = c(   kwbr = 'https://kwb-r.r-universe.dev',   CRAN = 'https://cloud.r-project.org'))  # Install R package \"dwc.wells\" install.packages('dwc.wells', dependencies = TRUE)"},{"path":"/dev/articles/prediction_random-forest.html","id":"input-dataset","dir":"Articles","previous_headings":"","what":"Input Dataset","title":"Random Forest","text":"","code":"library(dwc.wells) df <- dwc.wells::model_data_reduced str(df) #> 'data.frame':    6308 obs. of  27 variables: #>  $ Qs_rel                : num  100 97.8 75.1 78.5 52.2 ... #>  $ well_id               : int  548676 548676 548676 548676 548676 548676 548676 548676 548676 548676 ... #>  $ well_age_years        : num  0 23.2 29.3 29.5 35 ... #>  $ construction_year     : num  1970 1970 1970 1970 1970 1970 1970 1970 1970 1970 ... #>  $ screen_material       : Factor w/ 6 levels \"3fe9575b\",\"5bad81ff\",..: 2 2 2 2 2 2 2 2 2 2 ... #>  $ diameter              : num  300 300 300 300 300 300 300 300 300 300 ... #>  $ drilling_method       : Factor w/ 6 levels \"213a7eba\",\"53686f99\",..: 3 3 3 3 3 3 3 3 3 3 ... #>  $ admissible_discharge  : num  176 176 176 176 176 176 176 176 176 176 ... #>  $ operational_start.Qs  : num  39.1 39.1 39.1 39.1 39.1 ... #>  $ aquifer_coverage      : Factor w/ 5 levels \"79316b83\",\"90351ceb\",..: 1 1 1 1 1 1 1 1 1 1 ... #>  $ W_static.sd           : num  0.766 0.766 0.766 0.766 0.766 ... #>  $ surface_water.distance: Factor w/ 8 levels \"2af55c68\",\"2cfd2a47\",..: 2 2 2 2 2 2 2 2 2 2 ... #>  $ n_rehab               : int  0 1 1 2 2 3 3 4 4 4 ... #>  $ time_since_rehab_years: num  0 0.0411 6.193 0.0794 5.5524 ... #>  $ volume_m3_d.mean      : num  1203 1203 1203 1203 1203 ... #>  $ volume_m3_d.cv        : num  1.29 1.29 1.29 1.29 1.29 ... #>  $ quality.EC            : num  824 824 824 824 824 ... #>  $ quality.DO            : num  0.235 0.235 0.235 0.235 0.235 0.235 0.235 0.235 0.235 0.235 ... #>  $ quality.Temp          : num  11.7 11.7 11.7 11.7 11.7 11.7 11.7 11.7 11.7 11.7 ... #>  $ quality.pH            : num  7.4 7.4 7.4 7.4 7.4 7.4 7.4 7.4 7.4 7.4 ... #>  $ quality.Redox         : num  86 86 86 86 86 86 86 86 86 86 ... #>  $ quality.Fe_tot        : num  1.9 1.9 1.9 1.9 1.9 1.9 1.9 1.9 1.9 1.9 ... #>  $ quality.Mn            : num  0.24 0.24 0.24 0.24 0.24 0.24 0.24 0.24 0.24 0.24 ... #>  $ quality.NO3           : num  0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 ... #>  $ quality.PO4           : num  0.966 0.966 0.966 0.966 0.966 ... #>  $ quality.SO4           : num  94 94 94 94 94 94 94 94 94 94 ... #>  $ quality.TSS           : num  4.1 4.1 4.1 4.1 4.1 4.1 4.1 4.1 4.1 4.1 ..."},{"path":"/dev/articles/prediction_random-forest.html","id":"resampling","dir":"Articles","previous_headings":"","what":"Resampling","title":"Random Forest","text":"","code":"set.seed(1)  resampled_dataset <- dwc.wells::resample_dataset(   model_data = df,    method = \"random\",   prop = 0.8   )  df_training <- resampled_dataset$training df_test <- resampled_dataset$testing"},{"path":[]},{"path":"/dev/articles/prediction_random-forest.html","id":"hyperparameter-tuning","dir":"Articles","previous_headings":"Regression","what":"Hyperparameter Tuning","title":"Random Forest","text":"","code":"# Specify model ----------------------------------------------------------------    # specify model rf_reg_tune_model <- parsnip::rand_forest(trees = 500,                                            mtry = tune::tune(),                                            min_n = tune::tune()) %>%   # Specify the engine   parsnip::set_engine('randomForest') %>%   # Specify the mode   parsnip::set_mode('regression')  # specify recipe rec <- recipes::recipe(Qs_rel ~ ., data = df_training)  # setup  workflow rf_reg_tune_wflow <- workflows::workflow() %>%   workflows::add_recipe(rec) %>%   workflows::add_model(rf_reg_tune_model)  # define cross validation procedure cv_folds <- rsample::vfold_cv(df_training, v = 5)  # define hyperparameter grid #rf_reg_grid <- grid_random(parameters(rf_reg_tune_model), size = 100) #rf_reg_grid <- grid_regular(parameters(rf_reg_tune_model), c(5,5)) rf_reg_grid <- dials::grid_regular(dials::mtry(range = c(3, 15)),                                    dials::min_n(range = c(5, 15)),                                    levels = 13)  # parallelisation and tuning doParallel::registerDoParallel()  set.seed(345) rf_reg_tuning <- tune::tune_grid(   rf_reg_tune_wflow,   resamples = cv_folds,   grid = rf_reg_grid )  # visualise results metrics <- rf_reg_tuning %>% tune::collect_metrics() dwc.wells::save_data(metrics,                       path = getwd(),                       filename = sprintf(\"rf-regression_tuning-grid_resampling-%s_metric\",                                         resampling))  # visualise results metrics %>%   dplyr::filter(.metric == \"rmse\") %>%   dplyr::select(mean, min_n, mtry) %>%   tidyr::pivot_longer(min_n:mtry,                       values_to = \"value\",                       names_to = \"parameter\") %>%   ggplot2::ggplot(ggplot2::aes(value, mean, color = parameter)) +   ggplot2::geom_point(show.legend = FALSE) +   ggplot2::scale_x_continuous(breaks = seq.int(1, 15, 2)) +   ggplot2::facet_wrap(~parameter, scales = \"free_x\") +   ggplot2::labs(x = NULL, y = \"RMSE [%]\") +   sema.berlin.utils::my_theme()  ggplot2::ggsave(\"rf_reg_regression_hyperparameter_tuning_plot_regular_random_resampling.png\",                 width = 6,                  height = 3,                  dpi = 600)  # raster heatmap plot metrics %>%   dplyr::filter(.metric == \"rmse\") %>%   dplyr::select(mean, min_n, mtry) %>%   ggplot2::ggplot(aes(x = min_n, y = mtry, fill = mean)) +   ggplot2::geom_raster() +   ggplot2::scale_x_continuous(breaks = seq.int(1, 15, 2)) +   ggplot2::scale_y_continuous(breaks = seq.int(1, 15, 2)) +   ggplot2::labs(fill = \"RMSE [%]\") +   sema.berlin.utils::my_theme()  ggplot2::ggsave(\"rf_reg_regression_hyperparameter_tuning_plot_regular_random_resampling_heatmap.png\",                 width = 5,                  height = 3,                  dpi = 600)    # determine best model best_rmse <- tune::select_best(rf_reg_tuning, \"rmse\") dwc.wells::save_data(best_rmse,                       path = getwd(),                       filename = \"rf_reg_regression_best_model_regular\",                       \"RData\") final_rf_reg <- tune::finalize_model(rf_reg_tune_model, best_rmse)  # update workflow rf_reg_final_wflow <- workflows::workflow() %>%    workflows::add_recipe(rec) %>%    workflows::add_model(final_rf_reg)  # train and test model / workflow rf_reg_final_fit <- rf_reg_final_wflow %>% tune::last_fit(data_split)  #get metrics rf_reg_final_fit %>%  tune::collect_metrics()  # get predictions df_pred <- rf_reg_final_fit %>%  tune::collect_predictions()  # Evaluate model performance --- ggplot2::scatterplot(df_pred) ggplot2::ggsave(\"random_forest_regression_tuned_regular.png\", width = 3.5, height = 3)"},{"path":"/dev/articles/prediction_random-forest.html","id":"best-fit-model","dir":"Articles","previous_headings":"Regression","what":"Best-Fit Model","title":"Random Forest","text":"","code":"rf_reg_model <- parsnip::rand_forest(trees = 500,                                      mtry = 6,                                       min_n = 10) %>%   # Specify the engine   parsnip::set_engine('randomForest') %>%   # Specify the mode   parsnip::set_mode('regression')  # Model training and assessment (regression) -----------------------------------  # Train model set.seed(26) rf_reg_fit <- rf_reg_model %>% parsnip::fit(Qs_rel ~ ., data = df_training)  # Make predictions predictions <- predict(rf_reg_fit, df_test)  # Evaluate model performance df_pred <- df_test %>%    dplyr::select(Qs_rel) %>%    dplyr::bind_cols(predictions)  yardstick::rmse(df_pred, truth = Qs_rel, estimate = .pred) #> # A tibble: 1 × 3 #>   .metric .estimator .estimate #>   <chr>   <chr>          <dbl> #> 1 rmse    standard        16.3 yardstick::rsq(df_pred, truth = Qs_rel, estimate = .pred) #> # A tibble: 1 × 3 #>   .metric .estimator .estimate #>   <chr>   <chr>          <dbl> #> 1 rsq     standard       0.747  # scatter plot dwc.wells::scatterplot(df_pred,                         lines_80perc = FALSE,                         alpha = 1,                         pointsize = 0.9) #> Warning: Removed 142 rows containing missing values (geom_point). ggplot2::ggsave(\"scatterplot_rf-regression_numeric.png\",                 dpi = 600,                 width = 3.5,                 height = 3) #> Warning: Removed 142 rows containing missing values (geom_point)."},{"path":"/dev/articles/prediction_random-forest.html","id":"classification","dir":"Articles","previous_headings":"","what":"Classification","title":"Random Forest","text":"","code":"# classification performance ---------------------------------------------------  # classify Qs data df_pred <- df_pred %>%   dplyr::mutate(Qs_rel_class = dwc.wells::classify_Qs(Qs_rel),                 .pred_class = dwc.wells::classify_Qs(.pred))  # confusion matrix matrix <- yardstick::conf_mat(df_pred,                                truth = Qs_rel_class,                                estimate = .pred_class) matrix  #>           Truth #> Prediction low high #>       low  743  139 #>       high  27  355  # performance metrics metrics <- summary(matrix) metrics #> # A tibble: 13 × 3 #>    .metric              .estimator .estimate #>    <chr>                <chr>          <dbl> #>  1 accuracy             binary         0.869 #>  2 kap                  binary         0.713 #>  3 sens                 binary         0.965 #>  4 spec                 binary         0.719 #>  5 ppv                  binary         0.842 #>  6 npv                  binary         0.929 #>  7 mcc                  binary         0.726 #>  8 j_index              binary         0.684 #>  9 bal_accuracy         binary         0.842 #> 10 detection_prevalence binary         0.698 #> 11 precision            binary         0.842 #> 12 recall               binary         0.965 #> 13 f_meas               binary         0.900  dwc.wells::save_data(matrix,                       path = getwd(),                       filename = \"rf_numeric_to_class_matrix_split80\",                      formats = \"RData\")"},{"path":"/dev/articles/prediction_xgboost.html","id":"install-r-package","dir":"Articles","previous_headings":"","what":"Install R Package","title":"xgboost","text":"","code":"# Enable KWB-R universe  options(repos = c(   kwbr = 'https://kwb-r.r-universe.dev',   CRAN = 'https://cloud.r-project.org'))  # Install R package \"dwc.wells\" install.packages('dwc.wells', dependencies = TRUE)"},{"path":"/dev/articles/prediction_xgboost.html","id":"input-dataset","dir":"Articles","previous_headings":"","what":"Input Dataset","title":"xgboost","text":"","code":"library(dwc.wells) library(tidymodels) #> ── Attaching packages ────────────────────────────────────── tidymodels 1.0.0 ── #> ✔ broom        1.0.1      ✔ recipes      1.0.2  #> ✔ dials        1.0.0      ✔ rsample      1.1.0  #> ✔ dplyr        1.0.10     ✔ tibble       3.1.8  #> ✔ ggplot2      3.3.6      ✔ tidyr        1.2.1  #> ✔ infer        1.0.3      ✔ tune         1.0.1  #> ✔ modeldata    1.0.1      ✔ workflows    1.1.0  #> ✔ parsnip      1.0.2      ✔ workflowsets 1.0.0  #> ✔ purrr        0.3.5      ✔ yardstick    1.1.0 #> ── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ── #> ✖ purrr::discard() masks scales::discard() #> ✖ dplyr::filter()  masks stats::filter() #> ✖ dplyr::lag()     masks stats::lag() #> ✖ recipes::step()  masks stats::step() #> • Learn how to get started at https://www.tidymodels.org/start/ df <- dwc.wells::model_data_reduced str(df) #> 'data.frame':    6308 obs. of  27 variables: #>  $ Qs_rel                : num  100 97.8 75.1 78.5 52.2 ... #>  $ well_id               : int  548676 548676 548676 548676 548676 548676 548676 548676 548676 548676 ... #>  $ well_age_years        : num  0 23.2 29.3 29.5 35 ... #>  $ construction_year     : num  1970 1970 1970 1970 1970 1970 1970 1970 1970 1970 ... #>  $ screen_material       : Factor w/ 6 levels \"3fe9575b\",\"5bad81ff\",..: 2 2 2 2 2 2 2 2 2 2 ... #>  $ diameter              : num  300 300 300 300 300 300 300 300 300 300 ... #>  $ drilling_method       : Factor w/ 6 levels \"213a7eba\",\"53686f99\",..: 3 3 3 3 3 3 3 3 3 3 ... #>  $ admissible_discharge  : num  176 176 176 176 176 176 176 176 176 176 ... #>  $ operational_start.Qs  : num  39.1 39.1 39.1 39.1 39.1 ... #>  $ aquifer_coverage      : Factor w/ 5 levels \"79316b83\",\"90351ceb\",..: 1 1 1 1 1 1 1 1 1 1 ... #>  $ W_static.sd           : num  0.766 0.766 0.766 0.766 0.766 ... #>  $ surface_water.distance: Factor w/ 8 levels \"2af55c68\",\"2cfd2a47\",..: 2 2 2 2 2 2 2 2 2 2 ... #>  $ n_rehab               : int  0 1 1 2 2 3 3 4 4 4 ... #>  $ time_since_rehab_years: num  0 0.0411 6.193 0.0794 5.5524 ... #>  $ volume_m3_d.mean      : num  1203 1203 1203 1203 1203 ... #>  $ volume_m3_d.cv        : num  1.29 1.29 1.29 1.29 1.29 ... #>  $ quality.EC            : num  824 824 824 824 824 ... #>  $ quality.DO            : num  0.235 0.235 0.235 0.235 0.235 0.235 0.235 0.235 0.235 0.235 ... #>  $ quality.Temp          : num  11.7 11.7 11.7 11.7 11.7 11.7 11.7 11.7 11.7 11.7 ... #>  $ quality.pH            : num  7.4 7.4 7.4 7.4 7.4 7.4 7.4 7.4 7.4 7.4 ... #>  $ quality.Redox         : num  86 86 86 86 86 86 86 86 86 86 ... #>  $ quality.Fe_tot        : num  1.9 1.9 1.9 1.9 1.9 1.9 1.9 1.9 1.9 1.9 ... #>  $ quality.Mn            : num  0.24 0.24 0.24 0.24 0.24 0.24 0.24 0.24 0.24 0.24 ... #>  $ quality.NO3           : num  0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 ... #>  $ quality.PO4           : num  0.966 0.966 0.966 0.966 0.966 ... #>  $ quality.SO4           : num  94 94 94 94 94 94 94 94 94 94 ... #>  $ quality.TSS           : num  4.1 4.1 4.1 4.1 4.1 4.1 4.1 4.1 4.1 4.1 ..."},{"path":"/dev/articles/prediction_xgboost.html","id":"resampling","dir":"Articles","previous_headings":"","what":"Resampling","title":"xgboost","text":"","code":"set.seed(1)  resampled_dataset <- dwc.wells::resample_dataset(   model_data = df,    method = \"random\",   prop = 0.8   )  df_training <- resampled_dataset$training df_test <- resampled_dataset$testing"},{"path":[]},{"path":"/dev/articles/prediction_xgboost.html","id":"hyperparameter-tuning","dir":"Articles","previous_headings":"Regression","what":"Hyperparameter Tuning","title":"xgboost","text":"","code":"# Hyperparameter tuning --------------------------------------------------------   # specify model   xgb_model <- parsnip::boost_tree(     trees = 500,     tree_depth = tune::tune(), ## model complexity     min_n = tune::tune(), ## model complexity     loss_reduction = tune::tune(), ## model complexity     sample_size = tune::tune(), ## randomness     mtry = tune::tune(), ## randomness     learn_rate = tune::tune(), ## step size   ) %>%     parsnip::set_engine(\"xgboost\") %>%     parsnip::set_mode(\"regression\")    # set up workflow   xgb_wf <- workflows::workflow() %>%     workflows::add_formula(Qs_rel ~ .) %>%     workflows::add_model(xgb_model)    # hyperparameter sampling v1   # xgb_grid <- dials::grid_random(dials::tree_depth(),   #                                dials::min_n(),   #                                dials::loss_reduction(),   #                                sample_size = dials::sample_prop(),   #                                dials::finalize(dials::mtry(), df_training),   #                                dials::learn_rate(range = c(0.01, 0.1),    #                                                  trans = NULL),   #                                size = 1000)      # hyperparameter sampling v2   xgb_grid <- dials::grid_latin_hypercube(     dials::tree_depth(),     dials::min_n(),     dials::loss_reduction(),     sample_size = dials::sample_prop(),     dials::finalize(dials::mtry(), df_training),     dials::learn_rate(),     size = 500   )    # define cross validation procedure   cv_folds <- rsample::vfold_cv(df_training, v = 5)    # set up random grid with 20 combinations for first screening   doParallel::registerDoParallel()    # test different hyperparameters via cross validation on training data   set.seed(234)   xgb_tuning <- tune::tune_grid(     xgb_wf,     resamples = cv_folds,     grid = xgb_grid,     control = tune::control_grid(save_pred = TRUE)   )    # get assessment metrics   metrics <- tune::collect_metrics(xgb_tuning)      dwc.wells::save_data(metrics,                         path = getwd(),                         filename = \"metrics_tuning_xgb_random_resampling\")    # visualise results   metrics %>%     #filter(learn_rate > 0.01) %>%     dplyr::filter(.metric == \"rmse\") %>%     dplyr::select(mean, min_n, mtry, tree_depth, learn_rate, loss_reduction, sample_size) %>%     tidyr::pivot_longer(c(min_n, mtry, tree_depth, learn_rate, loss_reduction, sample_size),                         values_to = \"value\",                         names_to = \"parameter\") %>%     ggplot2::ggplot(ggplot2::aes(value, mean, color = parameter)) +     ggplot2::geom_point(show.legend = FALSE, size = 0.5) +     ggplot2::facet_wrap(~parameter, scales = \"free\") +     ggplot2::labs(x = NULL, y = \"RMSE [%]\") +     sema.berlin.utils::my_theme()  ggplot2::ggsave(\"xgb_regression_hyperparameter_tuning_plot_random_resampling_1000_v2.png\",                  width = 8,                  height = 4,                  dpi = 600)    # after example from https://juliasilge.com/blog/xgboost-tune-volleyball/  }"},{"path":"/dev/articles/prediction_xgboost.html","id":"best-fit-model","dir":"Articles","previous_headings":"Regression","what":"Best-Fit Model","title":"xgboost","text":"","code":"# Specify model ----------------------------------------------------------------  xgb_model <- parsnip::boost_tree(mtry = 6,                                  min_n = 10,                                  trees = 500,                                  tree_depth = 7,                                  loss_reduction = 10,                                  learn_rate = 0.1,                                  sample_size = 0.7) %>%   parsnip::set_engine(\"xgboost\",                        nthread = parallel::detectCores()) %>%   parsnip::set_mode(\"regression\")   # Model training and assessment (regression) -----------------------------------  # Train model set.seed(26) xgb_fit <- xgb_model %>% parsnip::fit(Qs_rel ~ ., data = df_training) #usethis::use_data(xgb_fit, compress = \"xz\", overwrite = TRUE)  # Make predictions predictions <- predict(xgb_fit, df_test)  # Evaluate model performance df_pred <- df_test %>%    dplyr::select(Qs_rel) %>%    dplyr::bind_cols(predictions)  yardstick::rmse(df_pred, truth = Qs_rel, estimate = .pred) #> # A tibble: 1 × 3 #>   .metric .estimator .estimate #>   <chr>   <chr>          <dbl> #> 1 rmse    standard        14.6 yardstick::rsq(df_pred, truth = Qs_rel, estimate = .pred) #> # A tibble: 1 × 3 #>   .metric .estimator .estimate #>   <chr>   <chr>          <dbl> #> 1 rsq     standard       0.788  # scatter plot dwc.wells::scatterplot(df_pred,                         lines_80perc = FALSE,                         alpha = 1,                         pointsize = 0.9) #> Warning: Removed 242 rows containing missing values (geom_point). ggplot2::ggsave(\"scatterplot_xgb_numeric.png\",                 dpi = 600,                 width = 3.5,                 height = 3) #> Warning: Removed 242 rows containing missing values (geom_point)."},{"path":"/dev/articles/prediction_xgboost.html","id":"prediction","dir":"Articles","previous_headings":"Regression","what":"Prediction","title":"xgboost","text":"","code":"sim_data <- dwc.wells::prepare_simulation_donothing_df(   model_data = df,   rehabs = dwc.wells::rehabs,    operational_start = dwc.wells::operational_start,    sim_interval = 1L,   sim_period = 60L,   sim_reference_date = Sys.Date() # to fill 'type` with `past`/`future`   )  str(sim_data) #> tibble [60,634 × 28] (S3: tbl_df/tbl/data.frame) #>  $ well_id               : int [1:60634] 40 40 40 40 40 40 40 40 40 40 ... #>  $ sim_date              : Date[1:60634], format: \"2016-05-11\" \"2017-05-11\" ... #>  $ type                  : chr [1:60634] \"past\" \"past\" \"past\" \"past\" ... #>  $ well_age_years        : num [1:60634] 0 1 2 3 4 5 6 7 8 9 ... #>  $ n_rehab               : num [1:60634] 1 1 1 1 1 1 1 1 1 1 ... #>  $ time_since_rehab_years: num [1:60634] 0 0.999 1.999 2.998 4 ... #>  $ construction_year     : num [1:60634] 2015 2015 2015 2015 2015 ... #>  $ screen_material       : Factor w/ 6 levels \"3fe9575b\",\"5bad81ff\",..: 2 2 2 2 2 2 2 2 2 2 ... #>  $ diameter              : num [1:60634] 300 300 300 300 300 300 300 300 300 300 ... #>  $ drilling_method       : Factor w/ 6 levels \"213a7eba\",\"53686f99\",..: 2 2 2 2 2 2 2 2 2 2 ... #>  $ admissible_discharge  : num [1:60634] 143 143 143 143 143 ... #>  $ operational_start.Qs  : num [1:60634] 33.9 33.9 33.9 33.9 33.9 ... #>  $ aquifer_coverage      : Factor w/ 5 levels \"79316b83\",\"90351ceb\",..: 1 1 1 1 1 1 1 1 1 1 ... #>  $ W_static.sd           : num [1:60634] 1.1 1.1 1.1 1.1 1.1 ... #>  $ surface_water.distance: Factor w/ 8 levels \"2af55c68\",\"2cfd2a47\",..: 1 1 1 1 1 1 1 1 1 1 ... #>  $ volume_m3_d.mean      : num [1:60634] 1946 1946 1946 1946 1946 ... #>  $ volume_m3_d.cv        : num [1:60634] 0.91 0.91 0.91 0.91 0.91 ... #>  $ quality.EC            : num [1:60634] 605 605 605 605 605 605 605 605 605 605 ... #>  $ quality.DO            : num [1:60634] 0.45 0.45 0.45 0.45 0.45 0.45 0.45 0.45 0.45 0.45 ... #>  $ quality.Temp          : num [1:60634] 12.4 12.4 12.4 12.4 12.4 12.4 12.4 12.4 12.4 12.4 ... #>  $ quality.pH            : num [1:60634] 7.5 7.5 7.5 7.5 7.5 7.5 7.5 7.5 7.5 7.5 ... #>  $ quality.Redox         : num [1:60634] 115 115 115 115 115 115 115 115 115 115 ... #>  $ quality.Fe_tot        : num [1:60634] 1.95 1.95 1.95 1.95 1.95 1.95 1.95 1.95 1.95 1.95 ... #>  $ quality.Mn            : num [1:60634] 0.093 0.093 0.093 0.093 0.093 0.093 0.093 0.093 0.093 0.093 ... #>  $ quality.NO3           : num [1:60634] 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 ... #>  $ quality.PO4           : num [1:60634] 0.844 0.844 0.844 0.844 0.844 ... #>  $ quality.SO4           : num [1:60634] 85 85 85 85 85 85 85 85 85 85 ... #>  $ quality.TSS           : num [1:60634] 3.45 3.45 3.45 3.45 3.45 3.45 3.45 3.45 3.45 3.45 ...  predictions <- dwc.wells::get_predictions(model = xgb_fit,                                            sim_data = sim_data)  ### Number of wells used for prediction length(unique(predictions$well_id)) #> [1] 994   if(FALSE) {  # plot 1: all predictions as points, one plot per well pdff <- \"predictions_do-nothing_points_per_well.pdf\" kwb.utils::preparePdf(pdff) dwc.wells::plot_predictions_points_per_well(predictions = predictions) kwb.utils::finishAndShowPdf(pdff)   # plot 2: all predictions as individual lines in one plot ----------------------  p2 <- ggplot(predictions, aes(x = well_age_years, y = Qs_rel, col = type, group = well_id)) +   geom_line(alpha = 0.05) +   scale_x_continuous(limits = c(0, 40)) +   scale_y_continuous(limits = c(0, 100)) +   labs(x = \"Well age [yrs]\", y = \"Specific capacity [%]\") +   sema.berlin.utils::my_theme(legend.position = \"none\")  p2 getwd()  ggsave(\"xgb_plot_multi_line_betriebsbereit_bis_40_past_future.png\", dpi = 600, width = 4.5, height = 3)   # plot mean prediction vs. confidence interval ---------------------------------  p3 <- ggplot(predictions, aes(x = well_age_years, y = Qs_rel)) +   scale_x_continuous(limits = c(0, 40)) +   scale_y_continuous(limits = c(0, 100)) +   labs(x = \"Well age [yrs]\", y = \"Specific capacity [%]\") +   # stat_summary(geom = \"ribbon\", fun.data = mean_cl_normal,   #              fun.args = list(conf.int = 0.9999), fill = \"lightblue\") +   stat_summary(geom = \"ribbon\", fun.data = \"median_hilow\", fill = \"lightblue\") +   stat_summary(geom = \"line\", fun = mean) +   sema.berlin.utils::my_theme()  p3  ggsave(\"xgb_plot_mean_line_and_95_conf_int_betriebsbereit_bis_40.png\", p3, dpi = 600, width = 4.5, height = 3)   # plot 4: predictions for two selected wells with colors for past / future -----  p4 <- ggplot(filter(predictions, well_id %in% c(1161, 5837)),              aes(x = well_age_years, y = Qs_rel, col = type)) +   geom_line(alpha = 0.5) +   scale_x_continuous(limits = c(0, 40)) +   scale_y_continuous(limits = c(NA, 100), breaks = scales::pretty_breaks(6)) +   facet_wrap(~well_id) +   labs(x = \"Well age [yrs]\", y = \"Specific capacity [%]\") +   sema.berlin.utils::my_theme(legend.position = \"none\")  p4  ggsave(\"xgb_plot_multi_line_betriebsbereit_bis_40_past_future_2wells.png\",        dpi = 600, width = 6, height = 3)   # plot predictions vs. observations for two selected wells ---------------------  df <- model_data %>% filter(well_id %in% c(1161, 5837)) %>%   mutate(n_rehab = as.factor(n_rehab)) df_pred <- predictions %>% filter(well_id %in% c(1161, 5837))  p5 <- ggplot2::ggplot(df, ggplot2::aes(x = well_age_years,                                       y = Qs_rel, col = n_rehab)) +   ggplot2::geom_point() +   #ggplot2::geom_line(lty = 2) +   #ggplot2::geom_line(ggplot2::aes(group = \"all\")) +   ggplot2::geom_line(data = df_pred, aes(x = well_age_years,                                          y = Qs_rel,                                          col = NULL,                                          lty = 'unity line'   ), alpha = 0.5) +   scale_x_continuous(limits = c(0, 40)) +   scale_y_continuous(limits = c(NA, 120), breaks = scales::pretty_breaks(6), oob = scales::rescale_none) +   ggplot2::scale_color_manual(values = rev(RColorBrewer::brewer.pal(length(levels(df$n_rehab)), \"RdYlGn\"))) +   #ggplot2::scale_color_manual(values = rev(scales::hue_pal()(length(levels(df$n_rehab))))) +   sema.berlin.utils::my_theme(legend.position = \"top\") +   ggplot2::guides(color = ggplot2::guide_legend(nrow = 1)) +   ggplot2::labs(color = \"observations (by number of rehabs):\",                 x = \"Well age [yrs]\",                 y = \"Specific capacity [%]\",                 linetype = \"predictions\") +   facet_wrap(~well_id, labeller = purrr::partial(label_both, sep = \": \"))  p5 ggsave(\"plot_observations_vs_predictions_xgboost_v3.png\", dpi = 600, width = 9, height = 4)   # plot predictions vs. observations for one selected well ----------------------  df <- model_data %>% filter(well_id %in% c(5837)) %>%   mutate(n_rehab = as.factor(n_rehab)) df_pred <- predictions %>% filter(well_id %in% c(5837))  p6 <- ggplot2::ggplot(df, ggplot2::aes(x = well_age_years,                                        y = Qs_rel, col = n_rehab)) +   ggplot2::geom_point() +   ggplot2::geom_line(ggplot2::aes(group = \"all\")) +   ggplot2::geom_line(data = df_pred, aes(x = well_age_years,                                          y = Qs_rel,                                          col = NULL,                                          lty = 'unity line'   ), alpha = 0.5) +   scale_x_continuous(limits = c(0, 40)) +   scale_y_continuous(limits = c(NA, 120), breaks = scales::pretty_breaks(6), oob = scales::rescale_none) +   ggplot2::scale_color_manual(values = rev(RColorBrewer::brewer.pal(length(levels(df$n_rehab)), \"RdYlGn\"))) +   #ggplot2::scale_color_manual(values = rev(scales::hue_pal()(length(levels(df$n_rehab))))) +   sema.berlin.utils::my_theme() +   #ggplot2::guides(color = ggplot2::guide_legend(nrow = 1)) +   ggplot2::labs(color = \"observations\\n(by number of rehabs):\",                 x = \"Well age [yrs]\",                 y = \"Specific capacity [%]\",                 linetype = \"predictions\") +   facet_wrap(~well_id, labeller = purrr::partial(label_both, sep = \": \"))  p6 ggplot2::ggsave(\"plot_observations_vs_predictions_xgboost_v3b.png\",                  dpi = 600,                  width = 6,                  height = 3.5) }"},{"path":"/dev/articles/prediction_xgboost.html","id":"classification","dir":"Articles","previous_headings":"","what":"Classification","title":"xgboost","text":"","code":"# classification performance ---------------------------------------------------  # classify Qs data df_pred <- df_pred %>%   dplyr::mutate(Qs_rel_class = dwc.wells::classify_Qs(Qs_rel),                 .pred_class = dwc.wells::classify_Qs(.pred))  # confusion matrix matrix <- yardstick::conf_mat(df_pred,                                truth = Qs_rel_class,                                estimate = .pred_class) matrix  #>           Truth #> Prediction low high #>       low  725  103 #>       high  45  391  # performance metrics metrics <- summary(matrix) metrics #> # A tibble: 13 × 3 #>    .metric              .estimator .estimate #>    <chr>                <chr>          <dbl> #>  1 accuracy             binary         0.883 #>  2 kap                  binary         0.749 #>  3 sens                 binary         0.942 #>  4 spec                 binary         0.791 #>  5 ppv                  binary         0.876 #>  6 npv                  binary         0.897 #>  7 mcc                  binary         0.752 #>  8 j_index              binary         0.733 #>  9 bal_accuracy         binary         0.867 #> 10 detection_prevalence binary         0.655 #> 11 precision            binary         0.876 #> 12 recall               binary         0.942 #> 13 f_meas               binary         0.907  dwc.wells::save_data(matrix,                       path = getwd(),                       filename = \"xgb_numeric_to_class_matrix_split80\",                      formats = \"RData\")"},{"path":"/dev/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Mathias Riechel. Author. Michael Rustler. Author, maintainer. . Funder. . Copyright holder.","code":""},{"path":"/dev/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Riechel M, Rustler M (2022). dwc.wells: Package Condition Predictions Drinking Water Wells. R package version 0.2.0.9000, https://github.com/KWB-R/dwc.wells.","code":"@Manual{,   title = {dwc.wells: A Package for Condition Predictions for Drinking Water Wells},   author = {Mathias Riechel and Michael Rustler},   year = {2022},   note = {R package version 0.2.0.9000},   url = {https://github.com/KWB-R/dwc.wells}, }"},{"path":"/dev/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"A Package for Condition Predictions for Drinking Water Wells","text":"details install KWB-R packages checkout installation tutorial.","code":"### Optionally: specify GitHub Personal Access Token (GITHUB_PAT) ### See here why this might be important for you: ### https://kwb-r.github.io/kwb.pkgbuild/articles/install.html#set-your-github_pat  # Sys.setenv(GITHUB_PAT = \"mysecret_access_token\")  # Install package \"remotes\" from CRAN if (! require(\"remotes\")) {   install.packages(\"remotes\", repos = \"https://cloud.r-project.org\") }  # Install KWB package 'dwc.wells' from GitHub remotes::install_github(\"KWB-R/dwc.wells\")"},{"path":"/dev/reference/Qs_heatmap_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Heatmap / raster plot for Qs values over time with each well as one line — Qs_heatmap_plot","title":"Heatmap / raster plot for Qs values over time with each well as one line — Qs_heatmap_plot","text":"Heatmap / raster plot Qs values time well one line","code":""},{"path":"/dev/reference/Qs_heatmap_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Heatmap / raster plot for Qs values over time with each well as one line — Qs_heatmap_plot","text":"","code":"Qs_heatmap_plot(   df,   colours,   dummy_labels,   date_limits,   title,   n_wells_per_page )"},{"path":"/dev/reference/Qs_heatmap_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Heatmap / raster plot for Qs values over time with each well as one line — Qs_heatmap_plot","text":"df data frame date, well_id, Qs_rel colours 3 colours low, middle high colour limits dummy_labels dummy labels less wells expected date_limits vector two date strings format \"yyyy-mm-dd\" title plot title n_wells_per_page number wells shown","code":""},{"path":"/dev/reference/chi2.CramersV.test.html","id":null,"dir":"Reference","previous_headings":"","what":"Title — chi2.CramersV.test","title":"Title — chi2.CramersV.test","text":"Title","code":""},{"path":"/dev/reference/chi2.CramersV.test.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Title — chi2.CramersV.test","text":"","code":"chi2.CramersV.test(data)"},{"path":"/dev/reference/chi2.CramersV.test.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Title — chi2.CramersV.test","text":"data data frame perform Chi-2-test","code":""},{"path":"/dev/reference/classify_Qs.html","id":null,"dir":"Reference","previous_headings":"","what":"Transfer Qs_rel into binary factor with low and high specific capacity — classify_Qs","title":"Transfer Qs_rel into binary factor with low and high specific capacity — classify_Qs","text":"Transfer Qs_rel binary factor low high specific capacity","code":""},{"path":"/dev/reference/classify_Qs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Transfer Qs_rel into binary factor with low and high specific capacity — classify_Qs","text":"","code":"classify_Qs(x, split_point = 80, class_names = c(\"low\", \"high\"))"},{"path":"/dev/reference/classify_Qs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transfer Qs_rel into binary factor with low and high specific capacity — classify_Qs","text":"x vector Qs_rel values split_point threshold classifying numeric Qs_rel values, default: 80 class_names class names, default: c(\"low\", \"high\")","code":""},{"path":"/dev/reference/combine_pump_test_and_Q_monitoring_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Combined Pumptest and Q Monitoring Dataset — combine_pump_test_and_Q_monitoring_data","title":"Combined Pumptest and Q Monitoring Dataset — combine_pump_test_and_Q_monitoring_data","text":"Combined Pumptest Q Monitoring Dataset","code":""},{"path":"/dev/reference/combine_pump_test_and_Q_monitoring_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combined Pumptest and Q Monitoring Dataset — combine_pump_test_and_Q_monitoring_data","text":"","code":"combine_pump_test_and_Q_monitoring_data(   df_pump_tests_tidy,   df_Q_monitoring,   pump_test_vars = get_pump_test_vars() )"},{"path":"/dev/reference/combine_pump_test_and_Q_monitoring_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combined Pumptest and Q Monitoring Dataset — combine_pump_test_and_Q_monitoring_data","text":"df_pump_tests_tidy df_pump_tests_tidy df_Q_monitoring df_Q_monitoring pump_test_vars default: get_pump_test_vars","code":""},{"path":"/dev/reference/combine_pump_test_and_Q_monitoring_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Combined Pumptest and Q Monitoring Dataset — combine_pump_test_and_Q_monitoring_data","text":"combined pumptest Q monitoring dataset","code":""},{"path":"/dev/reference/correlation_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"plots Qs_rel vs. input variable as box plot (categorical input variable)\nor scatterplot (numerical input variable) — correlation_plot","title":"plots Qs_rel vs. input variable as box plot (categorical input variable)\nor scatterplot (numerical input variable) — correlation_plot","text":"plots Qs_rel vs. input variable box plot (categorical input variable) scatterplot (numerical input variable)","code":""},{"path":"/dev/reference/correlation_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"plots Qs_rel vs. input variable as box plot (categorical input variable)\nor scatterplot (numerical input variable) — correlation_plot","text":"","code":"correlation_plot(df, x, y = \"Qs_rel\", title = gsub(\"_\", \" \", x))"},{"path":"/dev/reference/correlation_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"plots Qs_rel vs. input variable as box plot (categorical input variable)\nor scatterplot (numerical input variable) — correlation_plot","text":"df data frame x column name x variable\" y column name y variable (default Qs_rel\") title plot title","code":""},{"path":"/dev/reference/extdata_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Path to File in This Package — extdata_file","title":"Get Path to File in This Package — extdata_file","text":"Get Path File Package","code":""},{"path":"/dev/reference/extdata_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Path to File in This Package — extdata_file","text":"","code":"extdata_file(...)"},{"path":"/dev/reference/extdata_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Path to File in This Package — extdata_file","text":"... parts path passed system.file","code":""},{"path":"/dev/reference/fill_up_na_with_median_from_lookup.html","id":null,"dir":"Reference","previous_headings":"","what":"Fill up NA values with median of lookup table — fill_up_na_with_median_from_lookup","title":"Fill up NA values with median of lookup table — fill_up_na_with_median_from_lookup","text":"Fill NA values median lookup table","code":""},{"path":"/dev/reference/fill_up_na_with_median_from_lookup.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fill up NA values with median of lookup table — fill_up_na_with_median_from_lookup","text":"","code":"fill_up_na_with_median_from_lookup(df, df_lookup, matching_id = \"well_id\")"},{"path":"/dev/reference/fill_up_na_with_median_from_lookup.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fill up NA values with median of lookup table — fill_up_na_with_median_from_lookup","text":"df data frame NA values df_lookup data frame calculate median values matching_id column ids median calculated","code":""},{"path":"/dev/reference/frequency_table.html","id":null,"dir":"Reference","previous_headings":"","what":"calculate absolute and relative frequencies of categorical varables — frequency_table","title":"calculate absolute and relative frequencies of categorical varables — frequency_table","text":"calculate absolute relative frequencies categorical varables","code":""},{"path":"/dev/reference/frequency_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"calculate absolute and relative frequencies of categorical varables — frequency_table","text":"","code":"frequency_table(x, perc_digits = 1, sort_freq = FALSE)"},{"path":"/dev/reference/frequency_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"calculate absolute and relative frequencies of categorical varables — frequency_table","text":"x vector categorical variable perc_digits number decimal digits percentages, default = 1 sort_freq sort according frequency counts, logical, default: TRUE","code":""},{"path":"/dev/reference/get_W_static_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Get W_static measurement data from Neubaupumpversuche, Kurzpumpversuche and other sources — get_W_static_data","title":"Get W_static measurement data from Neubaupumpversuche, Kurzpumpversuche and other sources — get_W_static_data","text":"Get W_static measurement data Neubaupumpversuche, Kurzpumpversuche sources","code":""},{"path":"/dev/reference/get_W_static_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get W_static measurement data from Neubaupumpversuche, Kurzpumpversuche and other sources — get_W_static_data","text":"","code":"get_W_static_data(path, renamings, df_wells)"},{"path":"/dev/reference/get_W_static_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get W_static measurement data from Neubaupumpversuche, Kurzpumpversuche and other sources — get_W_static_data","text":"path path static water level data (csv-file) renamings list renamings df_wells data frame prepared well data","code":""},{"path":"/dev/reference/get_predictions.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Predictions — get_predictions","title":"Get Predictions — get_predictions","text":"Get Predictions","code":""},{"path":"/dev/reference/get_predictions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Predictions — get_predictions","text":"","code":"get_predictions(model, sim_data, predicted_parameter = \"Qs_rel\")"},{"path":"/dev/reference/get_predictions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Predictions — get_predictions","text":"model trained ML model sim_data retrieved prepare_simulation_donothing_df predicted_parameter name predicted parameter (default: \"Qs_rel\")","code":""},{"path":"/dev/reference/get_predictions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Predictions — get_predictions","text":"data frame predictions","code":""},{"path":"/dev/reference/get_pump_test_vars.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Default Pump Test Variables — get_pump_test_vars","title":"Get Default Pump Test Variables — get_pump_test_vars","text":"Get Default Pump Test Variables","code":""},{"path":"/dev/reference/get_pump_test_vars.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Default Pump Test Variables — get_pump_test_vars","text":"","code":"get_pump_test_vars()"},{"path":"/dev/reference/get_pump_test_vars.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Default Pump Test Variables — get_pump_test_vars","text":"vector column names pump test variables","code":""},{"path":"/dev/reference/get_pump_test_vars.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Default Pump Test Variables — get_pump_test_vars","text":"","code":"get_pump_test_vars() #>  [1] \"well_id\"                      \"date\"                         #>  [3] \"key\"                          \"Qs_rel\"                       #>  [5] \"days_since_operational_start\" \"well_age_years\"               #>  [7] \"n_rehab\"                      \"last_rehab.date\"              #>  [9] \"time_since_rehab_days\"        \"time_since_rehab_years\""},{"path":"/dev/reference/interpolate_Qs.html","id":null,"dir":"Reference","previous_headings":"","what":"Interpolates Qs time series data to a given time interval — interpolate_Qs","title":"Interpolates Qs time series data to a given time interval — interpolate_Qs","text":"Interpolates Qs time series data given time interval","code":""},{"path":"/dev/reference/interpolate_Qs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Interpolates Qs time series data to a given time interval — interpolate_Qs","text":"","code":"interpolate_Qs(df, interval_days = 1)"},{"path":"/dev/reference/interpolate_Qs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Interpolates Qs time series data to a given time interval — interpolate_Qs","text":"df data frame date Qs measurements interval_days interval interpolation","code":""},{"path":"/dev/reference/interpolate_and_fill.html","id":null,"dir":"Reference","previous_headings":"","what":"Interpolate and fill up static water level — interpolate_and_fill","title":"Interpolate and fill up static water level — interpolate_and_fill","text":"Interpolate fill static water level","code":""},{"path":"/dev/reference/interpolate_and_fill.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Interpolate and fill up static water level — interpolate_and_fill","text":"","code":"interpolate_and_fill(df, x_col, y_col, group_by_col, origin_col)"},{"path":"/dev/reference/interpolate_and_fill.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Interpolate and fill up static water level — interpolate_and_fill","text":"df data frame x_col x column, e.g. date, used interpolation y_col y column, e.g. measured values, used interpolation group_by_col grouping variable within interpolation done origin_col already existing created column type value","code":""},{"path":"/dev/reference/load_renamings_csv.html","id":null,"dir":"Reference","previous_headings":"","what":"Load renaming table from CSV file — load_renamings_csv","title":"Load renaming table from CSV file — load_renamings_csv","text":"Load renaming table CSV file","code":""},{"path":"/dev/reference/load_renamings_csv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load renaming table from CSV file — load_renamings_csv","text":"","code":"load_renamings_csv(infile, fileEncoding = \"WINDOWS-1252\", ...)"},{"path":"/dev/reference/load_renamings_csv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load renaming table from CSV file — load_renamings_csv","text":"infile full path CSV file fileEncoding Encoding CSV file given. Passed read.table. Defaut: \"WINDOWS-1252\" ... arguments passed read.table","code":""},{"path":"/dev/reference/load_renamings_excel.html","id":null,"dir":"Reference","previous_headings":"","what":"load renaming table from original excel file — load_renamings_excel","title":"load renaming table from original excel file — load_renamings_excel","text":"load renaming table original excel file","code":""},{"path":"/dev/reference/load_renamings_excel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"load renaming table from original excel file — load_renamings_excel","text":"","code":"load_renamings_excel(   infile,   sheet = \"DATEN\",   old_name_col = \"Feld\",   new_name_col = \"Parametername-R\" )"},{"path":"/dev/reference/load_renamings_excel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"load renaming table from original excel file — load_renamings_excel","text":"infile full path excel file sheet sheet name old_name_col name column original variable names new_name_col name column new variable names","code":""},{"path":"/dev/reference/model_data_reduced.html","id":null,"dir":"Reference","previous_headings":"","what":"Input Data for Well Capacity Prediction — model_data_reduced","title":"Input Data for Well Capacity Prediction — model_data_reduced","text":"reduced dataset well capacity prediction created R script /data-raw/prepare_model_data.R","code":""},{"path":"/dev/reference/model_data_reduced.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input Data for Well Capacity Prediction — model_data_reduced","text":"","code":"model_data_reduced"},{"path":"/dev/reference/model_data_reduced.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Input Data for Well Capacity Prediction — model_data_reduced","text":"data.frame 6308 rows 27 variables: Qs_rel specific capacity well relative operational start condition, output well_id well id, info well_age_years years since operationa start, input, numeric construction_year year well construction screen_material screen material diameter well diameter (mm) drilling_method drilling_method admissible_discharge allowed pumping rate operational_start.Qs initial Qs construction aquifer_coverage confined / unconfined W_static.sd standard deviation static water level surface_water.distance distance surface water n_rehab number well rehabilitations time_since_rehab_years time since last well rehabilitation years volume_m3_d.mean mean daily abstraction volume (m3) volume_m3_d.cv coefficient variation daily abstraction volume (m3) quality.EC water quality: electical conductivity (us/cm) quality.D0 water quality: dissolved oxygen (mg/l) quality.Temp water quality: temperature (C) quality.pH water quality: pH quality.Redox water quality: electical conductivity (us/cm) quality.Fe_tot water quality: dissolved oxygen (mg/l) quality.Mn water quality: Mn (mg/l) quality.NO3 water quality: NO3 (mg/l) quality.PO4 water quality: PO4 (mg/l) quality.SO4 water quality: SO4 (mg/l) quality.TSS water quality: Total Suspended Solids (mg/l)","code":""},{"path":"/dev/reference/model_data_reduced.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input Data for Well Capacity Prediction — model_data_reduced","text":"","code":"well_ids <- unique(rehabs$well_id[1:20]) idx <- model_data_reduced$well_id %in% well_ids tibble::as_tibble(model_data_reduced[idx, ]) #> # A tibble: 43 × 27 #>    Qs_rel well_id well_age_years const…¹ scree…² diame…³ drill…⁴ admis…⁵ opera…⁶ #>     <dbl>   <int>          <dbl>   <dbl> <fct>     <dbl> <fct>     <dbl>   <dbl> #>  1 100       9690           0       1991 d94670…     350 bbdca1…    50      50.2 #>  2  70.5     9690           3.79    1991 d94670…     350 bbdca1…    50      50.2 #>  3   9.68    9690          13.2     1991 d94670…     350 bbdca1…    50      50.2 #>  4  44.6     9690          13.4     1991 d94670…     350 bbdca1…    50      50.2 #>  5 100       3328           0       1995 93242c…     400 bbdca1…    46.8    25.4 #>  6  76.7     3328           5.92    1995 93242c…     400 bbdca1…    46.8    25.4 #>  7  86.5     3328           5.96    1995 93242c…     400 bbdca1…    46.8    25.4 #>  8  39.4     3328          14.5     1995 93242c…     400 bbdca1…    46.8    25.4 #>  9  60.3     3328          14.6     1995 93242c…     400 bbdca1…    46.8    25.4 #> 10  19.9     3328          17.2     1995 93242c…     400 bbdca1…    46.8    25.4 #> # … with 33 more rows, 18 more variables: aquifer_coverage <fct>, #> #   W_static.sd <dbl>, surface_water.distance <fct>, n_rehab <int>, #> #   time_since_rehab_years <dbl>, volume_m3_d.mean <dbl>, volume_m3_d.cv <dbl>, #> #   quality.EC <dbl>, quality.DO <dbl>, quality.Temp <dbl>, quality.pH <dbl>, #> #   quality.Redox <dbl>, quality.Fe_tot <dbl>, quality.Mn <dbl>, #> #   quality.NO3 <dbl>, quality.PO4 <dbl>, quality.SO4 <dbl>, quality.TSS <dbl>, #> #   and abbreviated variable names ¹​construction_year, ²​screen_material, …"},{"path":"/dev/reference/operational_start.html","id":null,"dir":"Reference","previous_headings":"","what":"Input Data for Well Capacity Prediction: Operational Start — operational_start","title":"Input Data for Well Capacity Prediction: Operational Start — operational_start","text":"Operational start date wells (prepared R script /data-raw/prepare_model_data.R)","code":""},{"path":"/dev/reference/operational_start.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input Data for Well Capacity Prediction: Operational Start — operational_start","text":"","code":"operational_start"},{"path":"/dev/reference/operational_start.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Input Data for Well Capacity Prediction: Operational Start — operational_start","text":"data.frame 6308 rows 2 variables: well_id well id, info operational_start.date date capacity measurement, info","code":""},{"path":"/dev/reference/operational_start.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input Data for Well Capacity Prediction: Operational Start — operational_start","text":"","code":"head(operational_start, n = 20) #>    well_id operational_start.date #> 1   548676             1970-12-15 #> 2   452737             1994-06-02 #> 3   124413             1994-06-02 #> 4   436523             1994-05-16 #> 5   856018             1994-05-09 #> 6   666931             1994-05-19 #> 7    25173             1994-05-03 #> 8   294762             1971-02-12 #> 9   392686             1994-04-11 #> 10  640775             1971-02-12 #> 11  538191             1970-09-23 #> 12  270373             1971-03-24 #> 13  549593             1963-10-14 #> 14  877029             1971-06-03 #> 15  284450             1971-06-03 #> 16  629118             1971-10-28 #> 17  536492             1974-06-20 #> 18  961313             1974-06-04 #> 19  203683             1974-05-22 #> 20  354634             1974-05-22"},{"path":"/dev/reference/paste_percent.html","id":null,"dir":"Reference","previous_headings":"","what":"Paste percent sign to numbers — paste_percent","title":"Paste percent sign to numbers — paste_percent","text":"Paste percent sign numbers","code":""},{"path":"/dev/reference/paste_percent.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Paste percent sign to numbers — paste_percent","text":"","code":"paste_percent(x)"},{"path":"/dev/reference/paste_percent.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Paste percent sign to numbers — paste_percent","text":"x numeric vector","code":""},{"path":"/dev/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"/dev/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"/dev/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"/dev/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"/dev/reference/plot_distribution.html","id":null,"dir":"Reference","previous_headings":"","what":"plot frequency distribution of numerical variable — plot_distribution","title":"plot frequency distribution of numerical variable — plot_distribution","text":"plot frequency distribution numerical variable","code":""},{"path":"/dev/reference/plot_distribution.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"plot frequency distribution of numerical variable — plot_distribution","text":"","code":"plot_distribution(   Data,   variable,   binwidth = NULL,   title,   vertical_x_axis_labels = TRUE,   boundary = 0 )"},{"path":"/dev/reference/plot_distribution.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"plot frequency distribution of numerical variable — plot_distribution","text":"Data Data plotted variable variable binwidth binwidrh title plot title vertical_x_axis_labels x-axis labels ploted vertically (TRUE / FALSE) boundary left boundary bars, default: 0","code":""},{"path":"/dev/reference/plot_frequencies.html","id":null,"dir":"Reference","previous_headings":"","what":"plot frequency distribution of factor variable — plot_frequencies","title":"plot frequency distribution of factor variable — plot_frequencies","text":"plot frequency distribution factor variable","code":""},{"path":"/dev/reference/plot_frequencies.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"plot frequency distribution of factor variable — plot_frequencies","text":"","code":"plot_frequencies(   Data,   variable,   title = variable,   offset_perc_labels = 0.1,   size_perc_labels = 3,   vertical_x_axis_labels = TRUE )"},{"path":"/dev/reference/plot_frequencies.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"plot frequency distribution of factor variable — plot_frequencies","text":"Data Data plotted variable variable title plot title offset_perc_labels distance labels bars size_perc_labels size percent labels vertical_x_axis_labels x-axis labels ploted vertically (TRUE / FALSE)","code":""},{"path":"/dev/reference/plot_predictions_points_per_well.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Predictions: Points per Well — plot_predictions_points_per_well","title":"Plot Predictions: Points per Well — plot_predictions_points_per_well","text":"Plot Predictions: Points per Well","code":""},{"path":"/dev/reference/plot_predictions_points_per_well.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Predictions: Points per Well — plot_predictions_points_per_well","text":"","code":"plot_predictions_points_per_well(   predictions,   max_simulation_years = NULL,   dbg = TRUE )"},{"path":"/dev/reference/plot_predictions_points_per_well.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Predictions: Points per Well — plot_predictions_points_per_well","text":"predictions predictions retrieved get_predictions max_simulation_years maximum years used xlim, provided (NULL) full simulation period used (default: NULL) dbg print debug messages","code":""},{"path":"/dev/reference/plot_predictions_points_per_well.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Predictions: Points per Well — plot_predictions_points_per_well","text":"plots one page per well","code":""},{"path":"/dev/reference/prepare_pump_test_data.html","id":null,"dir":"Reference","previous_headings":"","what":"prepare pump test data with one row per Qs-measurement + rehab history — prepare_pump_test_data","title":"prepare pump test data with one row per Qs-measurement + rehab history — prepare_pump_test_data","text":"prepare pump test data one row per Qs-measurement + rehab history","code":""},{"path":"/dev/reference/prepare_pump_test_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"prepare pump test data with one row per Qs-measurement + rehab history — prepare_pump_test_data","text":"","code":"prepare_pump_test_data(   path,   renamings,   df_wells,   pump_test_vars = get_pump_test_vars() )"},{"path":"/dev/reference/prepare_pump_test_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"prepare pump test data with one row per Qs-measurement + rehab history — prepare_pump_test_data","text":"path path pump test data renamings list renamings df_wells prepared data frame well characteristics pump_test_vars default: get_pump_test_vars","code":""},{"path":"/dev/reference/prepare_pump_test_data_1.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare pump test data in wide format — prepare_pump_test_data_1","title":"Prepare pump test data in wide format — prepare_pump_test_data_1","text":"Steps: ) read, rename clean data, ii) correct wrong pump test dates, iii) fill missing pump test dates, iv) get information replaced wells, v) calculate Qs Qs_rel, vi) determine action type, vii) select columns","code":""},{"path":"/dev/reference/prepare_pump_test_data_1.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare pump test data in wide format — prepare_pump_test_data_1","text":"","code":"prepare_pump_test_data_1(path, renamings, df_wells)"},{"path":"/dev/reference/prepare_pump_test_data_1.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare pump test data in wide format — prepare_pump_test_data_1","text":"path path pump test data renamings list renamings df_wells prepared data frame well characteristics","code":""},{"path":"/dev/reference/prepare_pump_test_data_2.html","id":null,"dir":"Reference","previous_headings":"","what":"reformats untidy pump test data from wide into long format — prepare_pump_test_data_2","title":"reformats untidy pump test data from wide into long format — prepare_pump_test_data_2","text":"reformats untidy pump test data wide long format","code":""},{"path":"/dev/reference/prepare_pump_test_data_2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"reformats untidy pump test data from wide into long format — prepare_pump_test_data_2","text":"","code":"prepare_pump_test_data_2(   df_pump_tests_untidy,   df_wells,   pump_test_vars = get_pump_test_vars() )"},{"path":"/dev/reference/prepare_pump_test_data_2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"reformats untidy pump test data from wide into long format — prepare_pump_test_data_2","text":"df_pump_tests_untidy pump test data wide format df_wells prepared data frame well characteristics pump_test_vars default: get_pump_test_vars","code":""},{"path":"/dev/reference/prepare_quality_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Quality Data — prepare_quality_data","title":"Prepare Quality Data — prepare_quality_data","text":"Prepare Quality Data","code":""},{"path":"/dev/reference/prepare_quality_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Quality Data — prepare_quality_data","text":"","code":"prepare_quality_data(path, renamings)"},{"path":"/dev/reference/prepare_quality_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Quality Data — prepare_quality_data","text":"path path renamings renamings","code":""},{"path":"/dev/reference/prepare_quality_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Quality Data — prepare_quality_data","text":"prepared quality day","code":""},{"path":"/dev/reference/prepare_simulation_donothing_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare 'Do Nothing' Simulation Data Frame — prepare_simulation_donothing_df","title":"Prepare 'Do Nothing' Simulation Data Frame — prepare_simulation_donothing_df","text":"Prepares simulation data frame regenerations performed past without assumung new ones future","code":""},{"path":"/dev/reference/prepare_simulation_donothing_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare 'Do Nothing' Simulation Data Frame — prepare_simulation_donothing_df","text":"","code":"prepare_simulation_donothing_df(   model_data = dwc.wells::model_data_reduced,   rehabs = dwc.wells::rehabs,   operational_start = dwc.wells::operational_start,   sim_interval = 1L,   sim_period = 60L,   sim_reference_date = as.Date(\"2021-05-01\"),   predicted_parameter = \"Qs_rel\" )"},{"path":"/dev/reference/prepare_simulation_donothing_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare 'Do Nothing' Simulation Data Frame — prepare_simulation_donothing_df","text":"model_data (reduced) model data set retrieved model_data_reduced, merged filtering duplicated columns (.e. 'well_age_years', 'n_rehab' 'time_since_rehab_years') name \"predicted_parameter\" rehabs rehabiliations dataset retrieved rehabs operational_start operational start dataset retrieved operational_start sim_interval simulation interval years predictions performed (default: 1L) sim_period simulation period years since operational start production well (default: 60L) sim_reference_date (default: .Date(\"2021-05-01\")), used generate fill column 'type' 'past' (< sim_reference_date) 'future' (>= sim_reference_date) predicted_parameter name predicted parameter (default: \"Qs_rel\")","code":""},{"path":"/dev/reference/prepare_simulation_donothing_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare 'Do Nothing' Simulation Data Frame — prepare_simulation_donothing_df","text":"simulation data frame","code":""},{"path":"/dev/reference/prepare_volume_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Volume Data — prepare_volume_data","title":"Prepare Volume Data — prepare_volume_data","text":"Prepare Volume Data","code":""},{"path":"/dev/reference/prepare_volume_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Volume Data — prepare_volume_data","text":"","code":"prepare_volume_data(path, renamings, df_wells)"},{"path":"/dev/reference/prepare_volume_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Volume Data — prepare_volume_data","text":"path path renamings renamings df_wells df_wells","code":""},{"path":"/dev/reference/prepare_volume_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Volume Data — prepare_volume_data","text":"Prepared volume data","code":""},{"path":"/dev/reference/read_csv.html","id":null,"dir":"Reference","previous_headings":"","what":"read csv data file exported by Sebastian Schimmelpfennig from db2 — read_csv","title":"read csv data file exported by Sebastian Schimmelpfennig from db2 — read_csv","text":"read csv data file exported Sebastian Schimmelpfennig db2","code":""},{"path":"/dev/reference/read_csv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"read csv data file exported by Sebastian Schimmelpfennig from db2 — read_csv","text":"","code":"read_csv(   file,   header = TRUE,   fileEncoding = \"UTF-8\",   skip = 2,   dec = \".\",   sep = \"\\t\",   na.strings = \"(null)\" )"},{"path":"/dev/reference/read_csv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"read csv data file exported by Sebastian Schimmelpfennig from db2 — read_csv","text":"file path csv file header logical, default = TRUE fileEncoding default = UTF-8 skip number rows skip, default = 2 dec decimal separator, default = '.' sep columns separator, default = 'tab' na.strings string represents NA, default = \"(null)\"","code":""},{"path":"/dev/reference/read_ms_access.html","id":null,"dir":"Reference","previous_headings":"","what":"read table from MS Access data base via odbc connection under 64-bit-R — read_ms_access","title":"read table from MS Access data base via odbc connection under 64-bit-R — read_ms_access","text":"read table MS Access data base via odbc connection 64-bit-R","code":""},{"path":"/dev/reference/read_ms_access.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"read table from MS Access data base via odbc connection under 64-bit-R — read_ms_access","text":"","code":"read_ms_access(path_db, tbl_name)"},{"path":"/dev/reference/read_ms_access.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"read table from MS Access data base via odbc connection under 64-bit-R — read_ms_access","text":"path_db full path database tbl_name name database table read","code":""},{"path":"/dev/reference/read_select_rename.html","id":null,"dir":"Reference","previous_headings":"","what":"read table from MS Access data base; select and rename columns as defined in\nrenamings table ('old_name' -> 'new_name') — read_select_rename","title":"read table from MS Access data base; select and rename columns as defined in\nrenamings table ('old_name' -> 'new_name') — read_select_rename","text":"read table MS Access data base; select rename columns defined renamings table ('old_name' -> 'new_name')","code":""},{"path":"/dev/reference/read_select_rename.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"read table from MS Access data base; select and rename columns as defined in\nrenamings table ('old_name' -> 'new_name') — read_select_rename","text":"","code":"read_select_rename(   path_db,   tbl_name,   renamings,   old_name_col = \"old_name\",   new_name_col = \"new_name\" )"},{"path":"/dev/reference/read_select_rename.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"read table from MS Access data base; select and rename columns as defined in\nrenamings table ('old_name' -> 'new_name') — read_select_rename","text":"path_db full path database tbl_name name database table read renamings name data frame renamings old_name_col name column original variable names new_name_col name column new variable names","code":""},{"path":"/dev/reference/rehabs.html","id":null,"dir":"Reference","previous_headings":"","what":"Input Data for Well Capacity Prediction: Well Rehabilitations — rehabs","title":"Input Data for Well Capacity Prediction: Well Rehabilitations — rehabs","text":"Well rehabilitations wells (prepared R script /data-raw/prepare_model_data.R)","code":""},{"path":"/dev/reference/rehabs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input Data for Well Capacity Prediction: Well Rehabilitations — rehabs","text":"","code":"rehabs"},{"path":"/dev/reference/rehabs.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Input Data for Well Capacity Prediction: Well Rehabilitations — rehabs","text":"data.frame 6308 rows 3 variables: well_id well id, info n_rehab number well rehabilitations rehab_date date well rehabilitation","code":""},{"path":"/dev/reference/rehabs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input Data for Well Capacity Prediction: Well Rehabilitations — rehabs","text":"","code":"head(rehabs, n = 20) #> # A tibble: 20 × 3 #> # Groups:   well_id [8] #>    well_id n_rehab rehab_date #>      <int>   <int> <date>     #>  1      40       1 2016-05-11 #>  2     860       1 1994-06-28 #>  3     860       2 1999-12-07 #>  4     860       3 2006-11-28 #>  5     860       4 2008-12-18 #>  6     860       5 2015-01-13 #>  7     860       6 2018-02-12 #>  8    2079       1 1997-07-08 #>  9    3328       1 2003-05-07 #> 10    3328       2 2011-12-16 #> 11    3328       3 2014-08-06 #> 12    8101       1 1996-06-03 #> 13    8101       2 2002-02-13 #> 14    8101       3 2007-07-10 #> 15    9101       1 2007-11-12 #> 16    9690       1 1995-08-09 #> 17    9690       2 2005-03-04 #> 18   10581       1 1994-07-18 #> 19   10581       2 2001-08-24 #> 20   10581       3 2005-06-16"},{"path":"/dev/reference/rename_values.html","id":null,"dir":"Reference","previous_headings":"","what":"rename values of a character vector according to renamings table — rename_values","title":"rename values of a character vector according to renamings table — rename_values","text":"rename values character vector according renamings table","code":""},{"path":"/dev/reference/rename_values.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"rename values of a character vector according to renamings table — rename_values","text":"","code":"rename_values(   x,   renamings,   old_name_col = \"old_name\",   new_name_col = \"new_name\" )"},{"path":"/dev/reference/rename_values.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"rename values of a character vector according to renamings table — rename_values","text":"x character vector renamings data frame consisting old new names old_name_col name column original variable names new_name_col name column new variable names","code":""},{"path":"/dev/reference/replace_na_with_median.html","id":null,"dir":"Reference","previous_headings":"","what":"Replace NAs with median — replace_na_with_median","title":"Replace NAs with median — replace_na_with_median","text":"Replace NAs median","code":""},{"path":"/dev/reference/replace_na_with_median.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Replace NAs with median — replace_na_with_median","text":"","code":"replace_na_with_median(x)"},{"path":"/dev/reference/replace_na_with_median.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Replace NAs with median — replace_na_with_median","text":"x vector, NA replaced","code":""},{"path":"/dev/reference/resample_dataset.html","id":null,"dir":"Reference","previous_headings":"","what":"Resample Dataset — resample_dataset","title":"Resample Dataset — resample_dataset","text":"Resample Dataset","code":""},{"path":"/dev/reference/resample_dataset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Resample Dataset — resample_dataset","text":"","code":"resample_dataset(model_data, method = \"random\", prop = 0.8)"},{"path":"/dev/reference/resample_dataset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Resample Dataset — resample_dataset","text":"model_data (reduced) model data set retrieved model_data_reduced method resampling method. Either \"random\" \"by_well\" (default: \"random\") prop proportion data retained modeling/analysis (default: 0.8), .e. 80% dataset","code":""},{"path":"/dev/reference/resample_dataset.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Resample Dataset — resample_dataset","text":"list elements \"training\" \"testing\" datasets","code":""},{"path":"/dev/reference/save_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Save data frame in different formats: csv, RData, rds — save_data","title":"Save data frame in different formats: csv, RData, rds — save_data","text":"Save data frame different formats: csv, RData, rds","code":""},{"path":"/dev/reference/save_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save data frame in different formats: csv, RData, rds — save_data","text":"","code":"save_data(Data, path, filename, formats = c(\"csv\", \"RData\", \"rds\"))"},{"path":"/dev/reference/save_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save data frame in different formats: csv, RData, rds — save_data","text":"Data data frame path path saving data filename core file name formats export formats: \"csv\", \"RData\", \"rds\" several using 'c'","code":""},{"path":"/dev/reference/scatterplot.html","id":null,"dir":"Reference","previous_headings":"","what":"scatterplot for comparing numeric predictions with observations — scatterplot","title":"scatterplot for comparing numeric predictions with observations — scatterplot","text":"scatterplot comparing numeric predictions observations","code":""},{"path":"/dev/reference/scatterplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"scatterplot for comparing numeric predictions with observations — scatterplot","text":"","code":"scatterplot(df_pred, lines_80perc = FALSE, alpha = 1, pointsize = 1)"},{"path":"/dev/reference/scatterplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"scatterplot for comparing numeric predictions with observations — scatterplot","text":"df_pred data frame obtained tidymodels::collect_predictions() columns Qs_rel .pred lines_80perc logical value; shout 80%-lines drawn?; default = FALSE alpha alpha value point colours, default: 1 pointsize size value points, default: 1","code":""},{"path":"/dev/reference/select_rename_cols.html","id":null,"dir":"Reference","previous_headings":"","what":"selects and renames columns from a data frame according to a reference table — select_rename_cols","title":"selects and renames columns from a data frame according to a reference table — select_rename_cols","text":"selects renames columns data frame according reference table","code":""},{"path":"/dev/reference/select_rename_cols.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"selects and renames columns from a data frame according to a reference table — select_rename_cols","text":"","code":"select_rename_cols(   df,   renamings,   old_name_col = \"old_name\",   new_name_col = \"new_name\" )"},{"path":"/dev/reference/select_rename_cols.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"selects and renames columns from a data frame according to a reference table — select_rename_cols","text":"df data frame cols renamed renamings name data frame renamings old_name_col name column original variable names new_name_col name column new variable names","code":""},{"path":"/dev/reference/summarise_marginal_factor_levels.html","id":null,"dir":"Reference","previous_headings":"","what":"summarise factor levels with relative frequency below a threshold — summarise_marginal_factor_levels","title":"summarise factor levels with relative frequency below a threshold — summarise_marginal_factor_levels","text":"summarise factor levels relative frequency threshold","code":""},{"path":"/dev/reference/summarise_marginal_factor_levels.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"summarise factor levels with relative frequency below a threshold — summarise_marginal_factor_levels","text":"","code":"summarise_marginal_factor_levels(x, perc_threshold, marginal_name)"},{"path":"/dev/reference/summarise_marginal_factor_levels.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"summarise factor levels with relative frequency below a threshold — summarise_marginal_factor_levels","text":"x factor variable perc_threshold percentage threshold levels summarised marginal_name new summary factor level","code":""},{"path":"/dev/reference/tidy_factor.html","id":null,"dir":"Reference","previous_headings":"","what":"turn character into factor, sort factor levels and replace NA level — tidy_factor","title":"turn character into factor, sort factor levels and replace NA level — tidy_factor","text":"turn character factor, sort factor levels replace NA level","code":""},{"path":"/dev/reference/tidy_factor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"turn character into factor, sort factor levels and replace NA level — tidy_factor","text":"","code":"tidy_factor(x, level_sorting = c(\"frequency\", \"alphabet\")[1])"},{"path":"/dev/reference/tidy_factor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"turn character into factor, sort factor levels and replace NA level — tidy_factor","text":"x character vector turned factor level_sorting sorting factor levels; two options: \"frequency\" (default) \"alphabet\"; level \"Unbekannt\" always always end","code":""},{"path":"/dev/news/index.html","id":"dwcwells-020-2022-07-12","dir":"Changelog","previous_headings":"","what":"dwc.wells 0.2.0 2022-07-12","title":"dwc.wells 0.2.0 2022-07-12","text":"Added example dataset reproducing ML machine learning algorithms Update workflows also install Suggests R packages required running vignettes","code":""},{"path":"/dev/news/index.html","id":"dwcwells-010-2022-04-07","dir":"Changelog","previous_headings":"","what":"dwc.wells 0.1.0 2022-04-07","title":"dwc.wells 0.1.0 2022-04-07","text":"ML machine learning predicting Qs production wells completed added documentation/workflow two best models: xgboost randomForest","code":""},{"path":"/dev/news/index.html","id":"dwcwells-0009000","dir":"Changelog","previous_headings":"","what":"dwc.wells 0.0.0.9000","title":"dwc.wells 0.0.0.9000","text":"First milestone: data preparation finished Save package status finishing data preparation starting modelling. Added NEWS.md file track changes package. see https://style.tidyverse.org/news.html writing good NEWS.md","code":""}]
